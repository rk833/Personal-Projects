
{% extends "base.html" %} {% block title %}Reset Password{% endblock %} 

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/reset_password.css') }}">
{% endblock %}

{% block content %}
<!-- Reset Password Container -->
<div class="container reset-password-container">
  <div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
      <div class="card shadow-sm">
        <div class="card-body p-5">
          <h2 class="text-center mb-4">Set New Password</h2>
          <!-- Reset Password Form -->
          <form method="POST">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

            <div class="mb-3">
              <label for="password" class="form-label">New Password</label>
              <div class="input-group">
                <span class="input-group-text">
                  <i class="fas fa-lock"></i>
                </span>
                <input
                  type="password"
                  class="form-control"
                  id="password"
                  name="password"
                  required
                  minlength="8"
                />
                <button
                  class="btn btn-outline-secondary"
                  type="button"
                  id="togglePassword"
                >
                  <i class="fas fa-eye" id="togglePasswordIcon"></i>
                </button>
              </div>
              <div class="form-text">
                Password must be at least 8 characters long.
              </div>
            </div>

            <div class="mb-3">
              <label for="confirm_password" class="form-label"
                >Confirm Password</label
              >
              <div class="input-group">
                <span class="input-group-text">
                  <i class="fas fa-lock"></i>
                </span>
                <input
                  type="password"
                  class="form-control"
                  id="confirm_password"
                  name="confirm_password"
                  required
                />
                <button
                  class="btn btn-outline-secondary"
                  type="button"
                  id="toggleConfirmPassword"
                >
                  <i class="fas fa-eye" id="toggleConfirmPasswordIcon"></i>
                </button>
              </div>
            </div>
            
            <!-- Reset Password Button -->
            <div class="d-grid gap-2">
              <button type="submit" class="btn btn-primary">
                Reset Password
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Back to Top Button -->
<button id="back-to-top" title="Go to top">â†‘</button>

{% endblock %} {% block extra_js %}
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Toggle for password field
    const togglePassword = document.getElementById("togglePassword");
    const passwordInput = document.getElementById("password");
    const togglePasswordIcon = document.getElementById("togglePasswordIcon");

    togglePassword.addEventListener("click", function () {
      const type =
        passwordInput.getAttribute("type") === "password" ? "text" : "password";
      passwordInput.setAttribute("type", type);
      togglePasswordIcon.classList.toggle("fa-eye");
      togglePasswordIcon.classList.toggle("fa-eye-slash");
    });

    // Toggle for confirm password field
    const toggleConfirmPassword = document.getElementById(
      "toggleConfirmPassword"
    );
    const confirmPasswordInput = document.getElementById("confirm_password");
    const toggleConfirmPasswordIcon = document.getElementById(
      "toggleConfirmPasswordIcon"
    );

    toggleConfirmPassword.addEventListener("click", function () {
      const type =
        confirmPasswordInput.getAttribute("type") === "password"
          ? "text"
          : "password";
      confirmPasswordInput.setAttribute("type", type);
      toggleConfirmPasswordIcon.classList.toggle("fa-eye");
      toggleConfirmPasswordIcon.classList.toggle("fa-eye-slash");
    });

    // Optional: Add password match validation
    const form = document.querySelector("form");
    form.addEventListener("submit", function (e) {
      if (passwordInput.value !== confirmPasswordInput.value) {
        e.preventDefault();
        alert("Passwords do not match!");
      }
    });
  });
</script>
{% endblock %}
